generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id               Int      @id @default(autoincrement())
  email            String   @unique
  name             String?

  // 1-to-many
  eventsOrganized  Event[]  @relation("EventOrganizer")

  // many-to-many
  eventsAttending  Event[]  @relation("EventAttendees")

  // many-to-many declines
  eventsDeclined   Event[]  @relation("EventDeclines")
}

model Event {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  date        DateTime
  location    String?

  // 1-to-many back reference
  organizer   User     @relation("EventOrganizer", fields: [organizerId], references: [id])
  organizerId Int

  // many-to-many
  attendees   User[]   @relation("EventAttendees")

  // many-to-many declines
  declinedBy  User[]   @relation("EventDeclines")
}
